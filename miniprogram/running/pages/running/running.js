"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
var host1_1 = require("./host1");
var host2_1 = require("./host2");
var host3_1 = require("./host3");
var host4_1 = require("./host4");
var host5_1 = require("./host5");
var host6_1 = require("./host6");
var host7_1 = require("./host7");
var host8_1 = require("./host8");
var HOSTS = [
    host1_1.HOST_1, host2_1.HOST_2, host3_1.HOST_3, host4_1.HOST_4,
    host5_1.HOST_5, host6_1.HOST_6, host7_1.HOST_7, host8_1.HOST_8
];
Page({
    onShow: function () {
        app.sound("start");
        this.setData({
            bgmPlaying: !app.bgmPaused()
        });
    },
    toggleBGM: function () {
        this.setData({
            bgmPlaying: !this.data.bgmPlaying
        });
        app.toggleBGM();
    },
    data: {
        sid: '',
        pid: '',
        questionNumber: 0,
        questionContent: "",
        choiceA: "",
        choiceB: "",
        lastChoice: '',
        lastChoiceStatus: 'unknown',
        LOTTERY_CORRECT_COUNT: 3,
        HOST_SRC: '',
        bgmPlaying: true
    },
    nextQuestionPending: false,
    nextQuestion: function (evt) {
        if (this.nextQuestionPending) {
            return;
        }
        var choice = evt.currentTarget.id;
        var page = this;
        this.nextQuestionPending = true;
        this.setData({ lastChoice: choice });
        wx.request({
            method: "POST",
            url: app.API_ENDPOINT + ("/session/" + this.data.sid + "/problem/" + this.data.pid),
            data: {
                ans: choice
            },
            header: {
                'X-User-Token': app.globalData.token
            },
            success: app.handleRequstFinish(function (res) {
                var session = res.data;
                if (session.status == 'done') {
                    app.sound("failed");
                    page.setData({ lastChoiceStatus: 'error' });
                    setTimeout(function () {
                        page.nextQuestionPending = false;
                        if (session.correct_count >= page.data.LOTTERY_CORRECT_COUNT) {
                            wx.redirectTo({
                                url: "/info-pages/pages/success/success?correct_count=" + session.correct_count + "&session_id=" + session.id,
                            });
                        }
                        else {
                            wx.redirectTo({
                                url: '/info-pages/pages/failure/failure'
                            });
                        }
                    }, 500);
                }
                else {
                    app.sound("correct");
                    page.setData({ lastChoiceStatus: 'correct' });
                    setTimeout(function () {
                        page.nextQuestionPending = false;
                        page.setData({
                            pid: session.problem.id,
                            questionContent: session.problem.body,
                            questionNumber: session.problem.idx,
                            choiceA: session.problem.A,
                            choiceB: session.problem.B,
                            lastChoiceStatus: 'unknown'
                        });
                    }, 500);
                }
            }),
            fail: function (res) {
                page.nextQuestionPending = false;
                app.handleRequestFail(res);
            }
        });
    },
    onLoad: function () {
        this.setData({
            HOST_SRC: "data:image/png;base64," + HOSTS[Math.floor(Math.random() * 8)]
        });
        var self = this;
        wx.request({
            url: app.API_ENDPOINT + "/session",
            method: "POST",
            header: {
                'X-User-Token': app.globalData.token
            },
            success: app.handleRequstFinish(function (res) {
                var session = res.data;
                self.setData({
                    sid: session.id,
                    pid: session.problem.id,
                    questionContent: session.problem.body,
                    questionNumber: session.problem.idx,
                    choiceA: session.problem.A,
                    choiceB: session.problem.B
                });
            }),
            fail: app.handleRequestFail
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVubmluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJ1bm5pbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQWMsQ0FBQztBQUUvQixpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBQ2pDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsaUNBQWlDO0FBRWpDLElBQU0sS0FBSyxHQUFrQjtJQUMzQixjQUFNLEVBQUUsY0FBTSxFQUFFLGNBQU0sRUFBRSxjQUFNO0lBQzlCLGNBQU0sRUFBRSxjQUFNLEVBQUUsY0FBTSxFQUFFLGNBQU07Q0FDL0IsQ0FBQTtBQUVELElBQUksQ0FBQztJQUNILE1BQU07UUFDSixHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO1NBQzdCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtTQUNsQyxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNELElBQUksRUFBRTtRQUNKLEdBQUcsRUFBRSxFQUFFO1FBQ1AsR0FBRyxFQUFFLEVBQUU7UUFDUCxjQUFjLEVBQUMsQ0FBQztRQUNoQixlQUFlLEVBQUMsRUFBRTtRQUNsQixPQUFPLEVBQUMsRUFBRTtRQUNWLE9BQU8sRUFBQyxFQUFFO1FBQ1YsVUFBVSxFQUFFLEVBQUU7UUFDZCxnQkFBZ0IsRUFBRSxTQUFTO1FBQzNCLHFCQUFxQixFQUFFLENBQUM7UUFDeEIsUUFBUSxFQUFFLEVBQUU7UUFDWixVQUFVLEVBQUUsSUFBSTtLQUNqQjtJQUNE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LFFBQVEsRUFBRSx3QkFBd0IsR0FBRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDekUsQ0FBQyxDQUFDO1FBQ0gsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLEVBQUUsQ0FBQyxPQUFPLENBQUM7WUFDVCxHQUFHLEVBQUUsR0FBRyxDQUFDLFlBQVksR0FBRyxVQUFVO1lBQ2xDLE1BQU0sRUFBRSxNQUFNO1lBQ2QsTUFBTSxFQUFFO2dCQUNOLGNBQWMsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUs7YUFDckM7WUFDRCxPQUFPLEVBQUUsR0FBRyxDQUFDLGtCQUFrQixDQUFDLFVBQUMsR0FBUTtnQkFDdkMsSUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztnQkFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQztvQkFDWCxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUU7b0JBQ2YsR0FBRyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtvQkFDdkIsZUFBZSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSTtvQkFDckMsY0FBYyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRztvQkFDbkMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDMUIsT0FBTyxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDM0IsQ0FBQyxDQUFBO1lBQ0osQ0FBQyxDQUFDO1lBQ0YsSUFBSSxFQUFFLEdBQUcsQ0FBQyxpQkFBaUI7U0FDNUIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKTtcblxuaW1wb3J0IHsgSE9TVF8xIH0gZnJvbSBcIi4vaG9zdDFcIjtcbmltcG9ydCB7IEhPU1RfMiB9IGZyb20gXCIuL2hvc3QyXCI7XG5pbXBvcnQgeyBIT1NUXzMgfSBmcm9tIFwiLi9ob3N0M1wiO1xuaW1wb3J0IHsgSE9TVF80IH0gZnJvbSBcIi4vaG9zdDRcIjtcbmltcG9ydCB7IEhPU1RfNSB9IGZyb20gXCIuL2hvc3Q1XCI7XG5pbXBvcnQgeyBIT1NUXzYgfSBmcm9tIFwiLi9ob3N0NlwiO1xuaW1wb3J0IHsgSE9TVF83IH0gZnJvbSBcIi4vaG9zdDdcIjtcbmltcG9ydCB7IEhPU1RfOCB9IGZyb20gXCIuL2hvc3Q4XCI7XG5cbmNvbnN0IEhPU1RTOiBBcnJheTxzdHJpbmc+ID0gW1xuICBIT1NUXzEsIEhPU1RfMiwgSE9TVF8zLCBIT1NUXzQsXG4gIEhPU1RfNSwgSE9TVF82LCBIT1NUXzcsIEhPU1RfOFxuXVxuXG5QYWdlKHtcbiAgb25TaG93KCkge1xuICAgIGFwcC5zb3VuZChcInN0YXJ0XCIpO1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBiZ21QbGF5aW5nOiAhYXBwLmJnbVBhdXNlZCgpXG4gICAgfSk7XG4gIH0sXG4gIHRvZ2dsZUJHTSgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYmdtUGxheWluZzogIXRoaXMuZGF0YS5iZ21QbGF5aW5nXG4gICAgfSk7XG4gICAgYXBwLnRvZ2dsZUJHTSgpO1xuICB9LFxuICBkYXRhOiB7XG4gICAgc2lkOiAnJyxcbiAgICBwaWQ6ICcnLFxuICAgIHF1ZXN0aW9uTnVtYmVyOjAsXG4gICAgcXVlc3Rpb25Db250ZW50OlwiXCIsXG4gICAgY2hvaWNlQTpcIlwiLFxuICAgIGNob2ljZUI6XCJcIixcbiAgICBsYXN0Q2hvaWNlOiAnJyxcbiAgICBsYXN0Q2hvaWNlU3RhdHVzOiAndW5rbm93bicsXG4gICAgTE9UVEVSWV9DT1JSRUNUX0NPVU5UOiAzLFxuICAgIEhPU1RfU1JDOiAnJyxcbiAgICBiZ21QbGF5aW5nOiB0cnVlXG4gIH0sXG4gIG5leHRRdWVzdGlvblBlbmRpbmc6IGZhbHNlLFxuICBuZXh0UXVlc3Rpb246IGZ1bmN0aW9uIChldnQ6IGFueSkge1xuICAgIGlmICh0aGlzLm5leHRRdWVzdGlvblBlbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY2hvaWNlID0gZXZ0LmN1cnJlbnRUYXJnZXQuaWQ7XG4gICAgdmFyIHBhZ2UgPSB0aGlzO1xuICAgIHRoaXMubmV4dFF1ZXN0aW9uUGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5zZXREYXRhKHsgbGFzdENob2ljZTogY2hvaWNlIH0pO1xuICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICB1cmw6IGFwcC5BUElfRU5EUE9JTlQgKyAoXCIvc2Vzc2lvbi9cIiArIHRoaXMuZGF0YS5zaWQgKyBcIi9wcm9ibGVtL1wiICsgdGhpcy5kYXRhLnBpZCksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGFuczogY2hvaWNlXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcjoge1xuICAgICAgICAgICAgJ1gtVXNlci1Ub2tlbic6IGFwcC5nbG9iYWxEYXRhLnRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6IGFwcC5oYW5kbGVSZXF1c3RGaW5pc2goZnVuY3Rpb24gKHJlczogYW55KSB7XG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gcmVzLmRhdGE7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0dXMgPT0gJ2RvbmUnKSB7XG4gICAgICAgICAgICAgIGFwcC5zb3VuZChcImZhaWxlZFwiKVxuICAgICAgICAgICAgICAgIHBhZ2Uuc2V0RGF0YSh7IGxhc3RDaG9pY2VTdGF0dXM6ICdlcnJvcicgfSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UubmV4dFF1ZXN0aW9uUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5jb3JyZWN0X2NvdW50ID49IHBhZ2UuZGF0YS5MT1RURVJZX0NPUlJFQ1RfQ09VTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgICB3eC5yZWRpcmVjdFRvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYC9pbmZvLXBhZ2VzL3BhZ2VzL3N1Y2Nlc3Mvc3VjY2Vzcz9jb3JyZWN0X2NvdW50PSR7c2Vzc2lvbi5jb3JyZWN0X2NvdW50fSZzZXNzaW9uX2lkPSR7c2Vzc2lvbi5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIHd4LnJlZGlyZWN0VG8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2luZm8tcGFnZXMvcGFnZXMvZmFpbHVyZS9mYWlsdXJlJ1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBhcHAuc291bmQoXCJjb3JyZWN0XCIpXG4gICAgICAgICAgICAgICAgcGFnZS5zZXREYXRhKHsgbGFzdENob2ljZVN0YXR1czogJ2NvcnJlY3QnIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBwYWdlLm5leHRRdWVzdGlvblBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpZDogc2Vzc2lvbi5wcm9ibGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25Db250ZW50OiBzZXNzaW9uLnByb2JsZW0uYm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uTnVtYmVyOiBzZXNzaW9uLnByb2JsZW0uaWR4LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlQTogc2Vzc2lvbi5wcm9ibGVtLkEsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VCOiBzZXNzaW9uLnByb2JsZW0uQixcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDaG9pY2VTdGF0dXM6ICd1bmtub3duJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcGFnZS5uZXh0UXVlc3Rpb25QZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBhcHAuaGFuZGxlUmVxdWVzdEZhaWwocmVzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIG9uTG9hZCgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgSE9TVF9TUkM6IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LFwiKyBIT1NUU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KV1cbiAgICB9KTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB3eC5yZXF1ZXN0KHtcbiAgICAgIHVybDogYXBwLkFQSV9FTkRQT0lOVCArIFwiL3Nlc3Npb25cIixcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgJ1gtVXNlci1Ub2tlbic6IGFwcC5nbG9iYWxEYXRhLnRva2VuXG4gICAgICB9LFxuICAgICAgc3VjY2VzczogYXBwLmhhbmRsZVJlcXVzdEZpbmlzaCgocmVzOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHJlcy5kYXRhO1xuICAgICAgICBzZWxmLnNldERhdGEoe1xuICAgICAgICAgIHNpZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICBwaWQ6IHNlc3Npb24ucHJvYmxlbS5pZCxcbiAgICAgICAgICBxdWVzdGlvbkNvbnRlbnQ6IHNlc3Npb24ucHJvYmxlbS5ib2R5LFxuICAgICAgICAgIHF1ZXN0aW9uTnVtYmVyOiBzZXNzaW9uLnByb2JsZW0uaWR4LFxuICAgICAgICAgIGNob2ljZUE6IHNlc3Npb24ucHJvYmxlbS5BLFxuICAgICAgICAgIGNob2ljZUI6IHNlc3Npb24ucHJvYmxlbS5CXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIGZhaWw6IGFwcC5oYW5kbGVSZXF1ZXN0RmFpbFxuICAgIH0pXG4gIH1cbn0pXG4iXX0=