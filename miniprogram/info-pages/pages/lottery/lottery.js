"use strict";
var app = getApp();
Page({
    data: {
        btnStyle: 'btn-bg-blue',
        logo: '',
        link: '',
        bgmPlaying: true
    },
    hasJump: false,
    onLoad: function (options) {
        console.log("options", options);
        this.setData({
            logo: decodeURIComponent(options.logo),
            link: decodeURIComponent(options.link)
        });
    },
    onShow: function () {
        app.sound("lottery");
        if (this.hasJump) {
            wx.redirectTo({
                url: "/pages/index/index"
            });
        }
        this.setData({
            bgmPlaying: !app.bgmPaused()
        });
    },
    toggleBGM: function () {
        this.setData({
            bgmPlaying: !this.data.bgmPlaying
        });
        app.toggleBGM();
    },
    toLottery: function () {
        this.hasJump = true;
        if (this.data.link.substr(0, 11) === "miniprogram") {
            var link = this.data.link.substr(14);
            var spliter = link.indexOf('/');
            var appId = link.substr(0, spliter);
            var path = link.substr(spliter + 1);
            console.log("link: ", link, appId, path);
            wx.navigateToMiniProgram({
                appId: appId,
                path: path
            });
        }
        else {
            wx.redirectTo({
                url: "../webview/webview?url=" + encodeURIComponent(this.data.link)
            });
        }
    },
    btnToRed: function () {
        app.sound("btn");
        this.setData({
            btnStyle: 'btn-bg-red'
        });
    },
    btnToBlue: function () {
        this.setData({
            btnStyle: 'btn-bg-blue'
        });
    },
    onShareAppMessage: app.onShare
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG90dGVyeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxvdHRlcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUksR0FBRyxHQUFHLE1BQU0sRUFBYyxDQUFDO0FBQy9CLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLFFBQVEsRUFBRSxhQUFhO1FBQ3ZCLElBQUksRUFBRSxFQUFFO1FBQ1IsSUFBSSxFQUFFLEVBQUU7UUFDUixVQUFVLEVBQUUsSUFBSTtLQUNqQjtJQUNELE9BQU8sRUFBRSxLQUFLO0lBQ2QsTUFBTSxZQUFDLE9BQVk7UUFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3RDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1NBQ3ZDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxNQUFNO1FBQ0osR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEIsRUFBRSxDQUFDLFVBQVUsQ0FBQztnQkFDWixHQUFHLEVBQUUsb0JBQW9CO2FBQzFCLENBQUMsQ0FBQTtTQUNIO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELFNBQVM7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO1NBQ2xDLENBQUMsQ0FBQztRQUNILEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBQ0QsU0FBUztRQUNQLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxhQUFhLEVBQUU7WUFDbEQsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN6QyxFQUFFLENBQUMscUJBQXFCLENBQUM7Z0JBQ3ZCLEtBQUssT0FBQTtnQkFDTCxJQUFJLE1BQUE7YUFDTCxDQUFDLENBQUE7U0FDSDthQUFNO1lBQ0wsRUFBRSxDQUFDLFVBQVUsQ0FBQztnQkFDWixHQUFHLEVBQUUsNEJBQTBCLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFHO2FBQ3BFLENBQUMsQ0FBQTtTQUNIO0lBQ0gsQ0FBQztJQUNELFFBQVE7UUFDTixHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxRQUFRLEVBQUUsWUFBWTtTQUN2QixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsU0FBUztRQUNQLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxRQUFRLEVBQUUsYUFBYTtTQUN4QixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLE9BQU87Q0FDL0IsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW5kZXgudHNcbi8vIOiOt+WPluW6lOeUqOWunuS+i1xudmFyIGFwcCA9IGdldEFwcDxJQXBwT3B0aW9uPigpO1xuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICBidG5TdHlsZTogJ2J0bi1iZy1ibHVlJyxcbiAgICBsb2dvOiAnJyxcbiAgICBsaW5rOiAnJyxcbiAgICBiZ21QbGF5aW5nOiB0cnVlXG4gIH0sXG4gIGhhc0p1bXA6IGZhbHNlLFxuICBvbkxvYWQob3B0aW9uczogYW55KSB7XG4gICAgY29uc29sZS5sb2coXCJvcHRpb25zXCIsIG9wdGlvbnMpO1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBsb2dvOiBkZWNvZGVVUklDb21wb25lbnQob3B0aW9ucy5sb2dvKSxcbiAgICAgIGxpbms6IGRlY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmxpbmspXG4gICAgfSlcbiAgfSxcbiAgb25TaG93KCkge1xuICAgIGFwcC5zb3VuZChcImxvdHRlcnlcIilcbiAgICBpZiAodGhpcy5oYXNKdW1wKSB7XG4gICAgICB3eC5yZWRpcmVjdFRvKHtcbiAgICAgICAgdXJsOiBcIi9wYWdlcy9pbmRleC9pbmRleFwiXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYmdtUGxheWluZzogIWFwcC5iZ21QYXVzZWQoKVxuICAgIH0pO1xuICB9LFxuICB0b2dnbGVCR00oKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJnbVBsYXlpbmc6ICF0aGlzLmRhdGEuYmdtUGxheWluZ1xuICAgIH0pO1xuICAgIGFwcC50b2dnbGVCR00oKTtcbiAgfSxcbiAgdG9Mb3R0ZXJ5KCkge1xuICAgIHRoaXMuaGFzSnVtcCA9IHRydWU7XG4gICAgaWYgKHRoaXMuZGF0YS5saW5rLnN1YnN0cigwLCAxMSkgPT09IFwibWluaXByb2dyYW1cIikge1xuICAgICAgY29uc3QgbGluayA9IHRoaXMuZGF0YS5saW5rLnN1YnN0cigxNCk7XG4gICAgICBjb25zdCBzcGxpdGVyID0gbGluay5pbmRleE9mKCcvJyk7XG4gICAgICBjb25zdCBhcHBJZCA9IGxpbmsuc3Vic3RyKDAsIHNwbGl0ZXIpO1xuICAgICAgY29uc3QgcGF0aCA9IGxpbmsuc3Vic3RyKHNwbGl0ZXIgKyAxKTtcbiAgICAgIGNvbnNvbGUubG9nKFwibGluazogXCIsIGxpbmssIGFwcElkLCBwYXRoKTtcbiAgICAgIHd4Lm5hdmlnYXRlVG9NaW5pUHJvZ3JhbSh7XG4gICAgICAgIGFwcElkLFxuICAgICAgICBwYXRoXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB3eC5yZWRpcmVjdFRvKHtcbiAgICAgICAgdXJsOiBgLi4vd2Vidmlldy93ZWJ2aWV3P3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmRhdGEubGluayl9YFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG4gIGJ0blRvUmVkKCkge1xuICAgIGFwcC5zb3VuZChcImJ0blwiKTtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYnRuU3R5bGU6ICdidG4tYmctcmVkJ1xuICAgIH0pXG4gIH0sXG4gIGJ0blRvQmx1ZSgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYnRuU3R5bGU6ICdidG4tYmctYmx1ZSdcbiAgICB9KVxuICB9LFxuICBvblNoYXJlQXBwTWVzc2FnZTogYXBwLm9uU2hhcmVcbn0pXG4iXX0=