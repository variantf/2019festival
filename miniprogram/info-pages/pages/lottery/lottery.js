"use strict";
var app = getApp();
Page({
    data: {
        btnStyle: 'btn-bg-blue',
        logo: '',
        link: '',
        bgmPlaying: true
    },
    hasJump: false,
    onLoad: function (options) {
        console.log("options", options);
        this.setData({
            logo: decodeURIComponent(options.logo),
            link: decodeURIComponent(options.link)
        });
    },
    onShow: function () {
        app.sound("lottery");
        if (this.hasJump) {
            wx.redirectTo({
                url: "/pages/index/index"
            });
        }
        this.setData({
            bgmPlaying: !app.bgmPaused()
        });
    },
    toggleBGM: function () {
        this.setData({
            bgmPlaying: !this.data.bgmPlaying
        });
        app.toggleBGM();
    },
    toLottery: function () {
        this.hasJump = true;
        if (this.data.link.substr(0, 11) === "miniprogram") {
            var link = this.data.link.substr(14);
            var spliter = link.indexOf('/');
            var appId = link.substr(0, spliter);
            var path = link.substr(spliter + 1);
            console.log("link: ", link, appId, path);
            wx.navigateToMiniProgram({
                appId: appId,
                path: path
            });
        }
        else {
            wx.redirectTo({
                url: "../webview/webview?url=" + encodeURIComponent(this.data.link)
            });
        }
    },
    btnToRed: function () {
        this.setData({
            btnStyle: 'btn-bg-red'
        });
    },
    btnToBlue: function () {
        this.setData({
            btnStyle: 'btn-bg-blue'
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG90dGVyeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxvdHRlcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUksR0FBRyxHQUFHLE1BQU0sRUFBYyxDQUFDO0FBQy9CLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLFFBQVEsRUFBRSxhQUFhO1FBQ3ZCLElBQUksRUFBRSxFQUFFO1FBQ1IsSUFBSSxFQUFFLEVBQUU7UUFDUixVQUFVLEVBQUUsSUFBSTtLQUNqQjtJQUNELE9BQU8sRUFBRSxLQUFLO0lBQ2QsTUFBTSxZQUFDLE9BQVk7UUFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3RDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1NBQ3ZDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxNQUFNO1FBQ0osR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEIsRUFBRSxDQUFDLFVBQVUsQ0FBQztnQkFDWixHQUFHLEVBQUUsb0JBQW9CO2FBQzFCLENBQUMsQ0FBQTtTQUNIO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELFNBQVM7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO1NBQ2xDLENBQUMsQ0FBQztRQUNILEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBQ0QsU0FBUztRQUNQLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxhQUFhLEVBQUU7WUFDbEQsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN6QyxFQUFFLENBQUMscUJBQXFCLENBQUM7Z0JBQ3ZCLEtBQUssT0FBQTtnQkFDTCxJQUFJLE1BQUE7YUFDTCxDQUFDLENBQUE7U0FDSDthQUFNO1lBQ0wsRUFBRSxDQUFDLFVBQVUsQ0FBQztnQkFDWixHQUFHLEVBQUUsNEJBQTBCLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFHO2FBQ3BFLENBQUMsQ0FBQTtTQUNIO0lBQ0gsQ0FBQztJQUNELFFBQVE7UUFDTixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsUUFBUSxFQUFFLFlBQVk7U0FDdkIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUNELFNBQVM7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsUUFBUSxFQUFFLGFBQWE7U0FDeEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGluZGV4LnRzXG4vLyDojrflj5blupTnlKjlrp7kvotcbnZhciBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKTtcblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgYnRuU3R5bGU6ICdidG4tYmctYmx1ZScsXG4gICAgbG9nbzogJycsXG4gICAgbGluazogJycsXG4gICAgYmdtUGxheWluZzogdHJ1ZVxuICB9LFxuICBoYXNKdW1wOiBmYWxzZSxcbiAgb25Mb2FkKG9wdGlvbnM6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKFwib3B0aW9uc1wiLCBvcHRpb25zKTtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgbG9nbzogZGVjb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMubG9nbyksXG4gICAgICBsaW5rOiBkZWNvZGVVUklDb21wb25lbnQob3B0aW9ucy5saW5rKVxuICAgIH0pXG4gIH0sXG4gIG9uU2hvdygpIHtcbiAgICBhcHAuc291bmQoXCJsb3R0ZXJ5XCIpXG4gICAgaWYgKHRoaXMuaGFzSnVtcCkge1xuICAgICAgd3gucmVkaXJlY3RUbyh7XG4gICAgICAgIHVybDogXCIvcGFnZXMvaW5kZXgvaW5kZXhcIlxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJnbVBsYXlpbmc6ICFhcHAuYmdtUGF1c2VkKClcbiAgICB9KTtcbiAgfSxcbiAgdG9nZ2xlQkdNKCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBiZ21QbGF5aW5nOiAhdGhpcy5kYXRhLmJnbVBsYXlpbmdcbiAgICB9KTtcbiAgICBhcHAudG9nZ2xlQkdNKCk7XG4gIH0sXG4gIHRvTG90dGVyeSgpIHtcbiAgICB0aGlzLmhhc0p1bXAgPSB0cnVlO1xuICAgIGlmICh0aGlzLmRhdGEubGluay5zdWJzdHIoMCwgMTEpID09PSBcIm1pbmlwcm9ncmFtXCIpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSB0aGlzLmRhdGEubGluay5zdWJzdHIoMTQpO1xuICAgICAgY29uc3Qgc3BsaXRlciA9IGxpbmsuaW5kZXhPZignLycpO1xuICAgICAgY29uc3QgYXBwSWQgPSBsaW5rLnN1YnN0cigwLCBzcGxpdGVyKTtcbiAgICAgIGNvbnN0IHBhdGggPSBsaW5rLnN1YnN0cihzcGxpdGVyICsgMSk7XG4gICAgICBjb25zb2xlLmxvZyhcImxpbms6IFwiLCBsaW5rLCBhcHBJZCwgcGF0aCk7XG4gICAgICB3eC5uYXZpZ2F0ZVRvTWluaVByb2dyYW0oe1xuICAgICAgICBhcHBJZCxcbiAgICAgICAgcGF0aFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgd3gucmVkaXJlY3RUbyh7XG4gICAgICAgIHVybDogYC4uL3dlYnZpZXcvd2Vidmlldz91cmw9JHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5kYXRhLmxpbmspfWBcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuICBidG5Ub1JlZCgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYnRuU3R5bGU6ICdidG4tYmctcmVkJ1xuICAgIH0pXG4gIH0sXG4gIGJ0blRvQmx1ZSgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYnRuU3R5bGU6ICdidG4tYmctYmx1ZSdcbiAgICB9KVxuICB9XG59KVxuIl19