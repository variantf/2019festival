"use strict";
var app = getApp();
Page({
    data: {
        correctNum: 0,
        btnStyle: 'btn-bg-blue',
        sessionId: '',
        bgmPlaying: true
    },
    toLottery: function () {
        wx.request({
            method: "POST",
            url: app.API_ENDPOINT + ("/session/" + this.data.sessionId + "/lottery"),
            header: {
                'X-User-Token': app.globalData.token
            },
            fail: app.handleRequestFail,
            success: app.handleRequstFinish(function (res) {
                var data = res.data;
                wx.redirectTo({ url: "../lottery/lottery?link=" + encodeURIComponent(data.link) + "&logo=" + encodeURIComponent(data.logo) });
            })
        });
    },
    onLoad: function (options) {
        console.log("options", options);
        this.setData({
            correctNum: options.correct_count,
            sessionId: options.session_id
        });
    },
    btnToRed: function () {
        this.setData({
            btnStyle: 'btn-bg-red'
        });
    },
    btnToBlue: function () {
        this.setData({
            btnStyle: 'btn-bg-blue'
        });
    },
    onShow: function () {
        this.setData({
            bgmPlaying: !app.bgmPaused()
        });
    },
    toggleBGM: function () {
        this.setData({
            bgmPlaying: !this.data.bgmPlaying
        });
        app.toggleBGM();
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VjY2Vzcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN1Y2Nlc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUksR0FBRyxHQUFHLE1BQU0sRUFBYyxDQUFBO0FBRTlCLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxDQUFDO1FBQ2IsUUFBUSxFQUFFLGFBQWE7UUFDdkIsU0FBUyxFQUFFLEVBQUU7UUFDYixVQUFVLEVBQUUsSUFBSTtLQUNqQjtJQUNELFNBQVM7UUFDUCxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQ1QsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsR0FBRyxDQUFDLFlBQVksSUFBRyxjQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxhQUFVLENBQUE7WUFDakUsTUFBTSxFQUFFO2dCQUNOLGNBQWMsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUs7YUFDckM7WUFDRCxJQUFJLEVBQUUsR0FBRyxDQUFDLGlCQUFpQjtZQUMzQixPQUFPLEVBQUUsR0FBRyxDQUFDLGtCQUFrQixDQUFDLFVBQUMsR0FBUTtnQkFDaEMsSUFBQSxlQUFJLENBQVE7Z0JBQ25CLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsNkJBQTJCLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBUyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzNILENBQUMsQ0FBQztTQUNILENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxNQUFNLFlBQUMsT0FBWTtRQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLE9BQU8sQ0FBQyxhQUFhO1lBQ2pDLFNBQVMsRUFBRSxPQUFPLENBQUMsVUFBVTtTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsUUFBUTtRQUNOLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxRQUFRLEVBQUUsWUFBWTtTQUN2QixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsU0FBUztRQUNQLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxRQUFRLEVBQUUsYUFBYTtTQUN4QixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsTUFBTTtRQUNKLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO1NBQzdCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtTQUNsQyxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDbEIsQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGluZGV4LnRzXG4vLyDojrflj5blupTnlKjlrp7kvotcbnZhciBhcHAgPSBnZXRBcHA8SUFwcE9wdGlvbj4oKVxuXG5QYWdlKHtcbiAgZGF0YToge1xuICAgIGNvcnJlY3ROdW06IDAsXG4gICAgYnRuU3R5bGU6ICdidG4tYmctYmx1ZScsXG4gICAgc2Vzc2lvbklkOiAnJyxcbiAgICBiZ21QbGF5aW5nOiB0cnVlXG4gIH0sXG4gIHRvTG90dGVyeSgpIHtcbiAgICB3eC5yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICB1cmw6IGFwcC5BUElfRU5EUE9JTlQgKyBgL3Nlc3Npb24vJHt0aGlzLmRhdGEuc2Vzc2lvbklkfS9sb3R0ZXJ5YCxcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICAnWC1Vc2VyLVRva2VuJzogYXBwLmdsb2JhbERhdGEudG9rZW5cbiAgICAgIH0sXG4gICAgICBmYWlsOiBhcHAuaGFuZGxlUmVxdWVzdEZhaWwsXG4gICAgICBzdWNjZXNzOiBhcHAuaGFuZGxlUmVxdXN0RmluaXNoKChyZXM6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCB7ZGF0YX0gPSByZXM7XG4gICAgICAgIHd4LnJlZGlyZWN0VG8oeyB1cmw6IGAuLi9sb3R0ZXJ5L2xvdHRlcnk/bGluaz0ke2VuY29kZVVSSUNvbXBvbmVudChkYXRhLmxpbmspfSZsb2dvPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEubG9nbyl9YCB9KTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0sXG4gIG9uTG9hZChvcHRpb25zOiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhcIm9wdGlvbnNcIiwgb3B0aW9ucylcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgY29ycmVjdE51bTogb3B0aW9ucy5jb3JyZWN0X2NvdW50LFxuICAgICAgc2Vzc2lvbklkOiBvcHRpb25zLnNlc3Npb25faWRcbiAgICB9KTtcbiAgfSxcbiAgYnRuVG9SZWQoKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJ0blN0eWxlOiAnYnRuLWJnLXJlZCdcbiAgICB9KVxuICB9LFxuICBidG5Ub0JsdWUoKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJ0blN0eWxlOiAnYnRuLWJnLWJsdWUnXG4gICAgfSlcbiAgfSxcbiAgb25TaG93KCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBiZ21QbGF5aW5nOiAhYXBwLmJnbVBhdXNlZCgpXG4gICAgfSk7XG4gIH0sXG4gIHRvZ2dsZUJHTSgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYmdtUGxheWluZzogIXRoaXMuZGF0YS5iZ21QbGF5aW5nXG4gICAgfSk7XG4gICAgYXBwLnRvZ2dsZUJHTSgpO1xuICB9XG59KVxuIl19