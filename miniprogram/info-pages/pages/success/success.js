"use strict";
var app = getApp();
Page({
    data: {
        correctNum: 0,
        btnStyle: 'btn-bg-blue',
        sessionId: '',
        bgmPlaying: true
    },
    toLottery: function () {
        wx.request({
            method: "POST",
            url: app.API_ENDPOINT + ("/session/" + this.data.sessionId + "/lottery"),
            header: {
                'X-User-Token': app.globalData.token
            },
            fail: app.handleRequestFail,
            success: app.handleRequstFinish(function (res) {
                var data = res.data;
                wx.redirectTo({ url: "../lottery/lottery?link=" + encodeURIComponent(data.link) + "&logo=" + encodeURIComponent(data.logo) });
            })
        });
    },
    onLoad: function (options) {
        console.log("options", options);
        this.setData({
            correctNum: options.correct_count,
            sessionId: options.session_id
        });
    },
    btnToRed: function () {
        app.sound("btn");
        this.setData({
            btnStyle: 'btn-bg-red'
        });
    },
    btnToBlue: function () {
        this.setData({
            btnStyle: 'btn-bg-blue'
        });
    },
    onShow: function () {
        this.setData({
            bgmPlaying: !app.bgmPaused()
        });
    },
    toggleBGM: function () {
        this.setData({
            bgmPlaying: !this.data.bgmPlaying
        });
        app.toggleBGM();
    },
    onShareAppMessage: app.onShare
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VjY2Vzcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN1Y2Nlc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUksR0FBRyxHQUFHLE1BQU0sRUFBYyxDQUFBO0FBRTlCLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxDQUFDO1FBQ2IsUUFBUSxFQUFFLGFBQWE7UUFDdkIsU0FBUyxFQUFFLEVBQUU7UUFDYixVQUFVLEVBQUUsSUFBSTtLQUNqQjtJQUNELFNBQVM7UUFDUCxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQ1QsTUFBTSxFQUFFLE1BQU07WUFDZCxHQUFHLEVBQUUsR0FBRyxDQUFDLFlBQVksSUFBRyxjQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxhQUFVLENBQUE7WUFDakUsTUFBTSxFQUFFO2dCQUNOLGNBQWMsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUs7YUFDckM7WUFDRCxJQUFJLEVBQUUsR0FBRyxDQUFDLGlCQUFpQjtZQUMzQixPQUFPLEVBQUUsR0FBRyxDQUFDLGtCQUFrQixDQUFDLFVBQUMsR0FBUTtnQkFDaEMsSUFBQSxlQUFJLENBQVE7Z0JBQ25CLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsNkJBQTJCLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBUyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzNILENBQUMsQ0FBQztTQUNILENBQUMsQ0FBQztJQUNMLENBQUM7SUFDRCxNQUFNLFlBQUMsT0FBWTtRQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLE9BQU8sQ0FBQyxhQUFhO1lBQ2pDLFNBQVMsRUFBRSxPQUFPLENBQUMsVUFBVTtTQUM5QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsUUFBUTtRQUNOLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFFBQVEsRUFBRSxZQUFZO1NBQ3ZCLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFFBQVEsRUFBRSxhQUFhO1NBQ3hCLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxNQUFNO1FBQ0osSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUU7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELFNBQVM7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO1NBQ2xDLENBQUMsQ0FBQztRQUNILEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBQ0QsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLE9BQU87Q0FDL0IsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW5kZXgudHNcbi8vIOiOt+WPluW6lOeUqOWunuS+i1xudmFyIGFwcCA9IGdldEFwcDxJQXBwT3B0aW9uPigpXG5cblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgY29ycmVjdE51bTogMCxcbiAgICBidG5TdHlsZTogJ2J0bi1iZy1ibHVlJyxcbiAgICBzZXNzaW9uSWQ6ICcnLFxuICAgIGJnbVBsYXlpbmc6IHRydWVcbiAgfSxcbiAgdG9Mb3R0ZXJ5KCkge1xuICAgIHd4LnJlcXVlc3Qoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIHVybDogYXBwLkFQSV9FTkRQT0lOVCArIGAvc2Vzc2lvbi8ke3RoaXMuZGF0YS5zZXNzaW9uSWR9L2xvdHRlcnlgLFxuICAgICAgaGVhZGVyOiB7XG4gICAgICAgICdYLVVzZXItVG9rZW4nOiBhcHAuZ2xvYmFsRGF0YS50b2tlblxuICAgICAgfSxcbiAgICAgIGZhaWw6IGFwcC5oYW5kbGVSZXF1ZXN0RmFpbCxcbiAgICAgIHN1Y2Nlc3M6IGFwcC5oYW5kbGVSZXF1c3RGaW5pc2goKHJlczogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IHJlcztcbiAgICAgICAgd3gucmVkaXJlY3RUbyh7IHVybDogYC4uL2xvdHRlcnkvbG90dGVyeT9saW5rPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEubGluayl9JmxvZ289JHtlbmNvZGVVUklDb21wb25lbnQoZGF0YS5sb2dvKX1gIH0pO1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSxcbiAgb25Mb2FkKG9wdGlvbnM6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKFwib3B0aW9uc1wiLCBvcHRpb25zKVxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBjb3JyZWN0TnVtOiBvcHRpb25zLmNvcnJlY3RfY291bnQsXG4gICAgICBzZXNzaW9uSWQ6IG9wdGlvbnMuc2Vzc2lvbl9pZFxuICAgIH0pO1xuICB9LFxuICBidG5Ub1JlZCgpIHtcbiAgICBhcHAuc291bmQoXCJidG5cIik7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJ0blN0eWxlOiAnYnRuLWJnLXJlZCdcbiAgICB9KVxuICB9LFxuICBidG5Ub0JsdWUoKSB7XG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIGJ0blN0eWxlOiAnYnRuLWJnLWJsdWUnXG4gICAgfSlcbiAgfSxcbiAgb25TaG93KCkge1xuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICBiZ21QbGF5aW5nOiAhYXBwLmJnbVBhdXNlZCgpXG4gICAgfSk7XG4gIH0sXG4gIHRvZ2dsZUJHTSgpIHtcbiAgICB0aGlzLnNldERhdGEoe1xuICAgICAgYmdtUGxheWluZzogIXRoaXMuZGF0YS5iZ21QbGF5aW5nXG4gICAgfSk7XG4gICAgYXBwLnRvZ2dsZUJHTSgpO1xuICB9LFxuICBvblNoYXJlQXBwTWVzc2FnZTogYXBwLm9uU2hhcmVcbn0pXG4iXX0=